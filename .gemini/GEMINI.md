# –ü—Ä–æ—î–∫—Ç: AI Telegram Chat Bot (Gemini Voice Assistant)

## –ó–∞–≥–∞–ª—å–Ω–∞ –º–µ—Ç–∞
–†–æ–∑—Ä–æ–±–∫–∞ –±–∞–≥–∞—Ç–æ—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ Telegram-–±–æ—Ç–∞ –Ω–∞ Python, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **Gemini Pro/ Flash/ Flash Lite** (—Ç–µ–∫—Å—Ç/–∫–æ–Ω—Ç–µ–∫—Å—Ç —ñ –ø–∞–º º—è—Ç—å, —Ç–∞–∫–æ–∂ RAG), **Vosk** (ASR) —Ç–∞ **EdgeTTS** (TTS) –∑ —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –≤–∏—Å–æ–∫–æ—è–∫—ñ—Å–Ω—ñ–π **—É–∫—Ä–∞—ó–Ω—Å—å–∫—ñ–π –º–æ–≤—ñ** —Ç–∞ –∑—Ä—É—á–Ω–æ–º—É —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—ñ —á–µ—Ä–µ–∑ Docker.

## –°–µ—Ä–µ–¥–æ–≤–∏—â–µ —Ç–∞ –ü–ª–∞—Ç—Ñ–æ—Ä–º–∏
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Ä–æ–∑—Ä–æ–±–∫–∏:** macOS 14.1.1.
- **–ú–æ–≤–∞:** Python 3.11+.
- **–°–µ—Ä–µ–¥–æ–≤–∏—â–µ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è (Production):** Ubuntu Server 20.04 (–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—è —á–µ—Ä–µ–∑ Docker).
- **–í—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ:** venv.
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—è:** Docker —Ç–∞ Dockerfile.
- **–ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:** requirements.txt.
- **–ö–µ—Ä—É–≤–∞–Ω–Ω—è —Å–µ–∫—Ä–µ—Ç–∞–º–∏:** python-dotenv (–¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è .env).

## –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π —Å—Ç–µ–∫ —Ç–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫:** aiogram (–≤–µ—Ä—Å—ñ—è 3.x).
- **AI/ML/–ú–µ–¥—ñ–∞:**
    - **–¢–µ–∫—Å—Ç/–ß–∞—Ç/–ö–æ–Ω—Ç–µ–∫—Å—Ç:** Gemini Pro/ Flash/ Flash Lite (—á–µ—Ä–µ–∑ Google GenAI SDK).
    - **–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ó–æ–±—Ä–∞–∂–µ–Ω—å:** —â–µ –Ω–µ–∑–Ω–∞—é —è–∫–∏–π —Å–µ—Ä–≤—ñ—Å –±—É–¥–µ.
    - **–†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –ú–æ–≤–ª–µ–Ω–Ω—è (ASR):** Vosk (–ª–æ–∫–∞–ª—å–Ω–æ, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î WAV).
    - **–°–∏–Ω—Ç–µ–∑ –ú–æ–≤–ª–µ–Ω–Ω—è (TTS):** EdgeTTS (—É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π –≥–æ–ª–æ—Å).
    - **–û–±—Ä–æ–±–∫–∞ –ê—É–¥—ñ–æ:** FFmpeg (–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –º–∞—î –±—É—Ç–∏ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–µ Dockerfile).
- **–®–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è:** cryptography (–¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å —Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É).
- **–ë–∞–∑–∞ –î–∞–Ω–∏—Ö:** **–ü–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –ë–î** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, PostgreSQL –∞–±–æ SQLite) –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É, –¥–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤–æ—ó –ø–∞–º'—è—Ç—ñ, RAG-–¥–∞–Ω–∏—Ö —Ç–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏—Ö –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å.

## –í–∏–º–æ–≥–∏ –¥–æ –ú–æ–≤–∏ —Ç–∞ –ú–æ–¥–µ–ª—ñ
- **–û—Å–Ω–æ–≤–Ω–∞ –ú–æ–≤–∞ –í—ñ–¥–ø–æ–≤—ñ–¥–µ–π:** **–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞**. –í—Å—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤—ñ–¥ Gemini, TTS —Ç–∞ —Å–∏—Å—Ç–µ–º–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é.
- **–ú–æ–¥–µ–ª—å Gemini:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `Gemini Pro/ Flash/ Flash Lite` —è–∫ –æ—Å–Ω–æ–≤–Ω—É –º–æ–¥–µ–ª—å –¥–ª—è —á–∞—Ç—É (–¥–ª—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ —Ç–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ).

---

## ‚ú® –í–∏–º–æ–≥–∏ –¥–æ –ù–∞–¥—ñ–π–Ω–æ—Å—Ç—ñ —Ç–∞ –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

### 1. ‚öôÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Ç–∞ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
- **–ì–Ω—É—á–∫–∞ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:** –í—Å—ñ –Ω–µ—á—É—Ç–ª–∏–≤—ñ –¥–∞–Ω—ñ, —è–∫—ñ –º–æ–∂—É—Ç—å —á–∞—Å—Ç–æ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏—Å—è, –º–∞—é—Ç—å –±—É—Ç–∏ –≤–∏–Ω–µ—Å–µ–Ω—ñ –≤ **–æ–∫—Ä–µ–º–∏–π –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω–∏–π —Ñ–∞–π–ª** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `config/runtime_config.py`).
- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –ö–æ–Ω—Ç–µ–∫—Å—Ç—É:** –£ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ:
    - **`CONTEXT_MESSAGE_LIMIT`:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ.
    - **`TOKEN_LIMIT_IN`:** –õ—ñ–º—ñ—Ç —Ç–æ–∫–µ–Ω—ñ–≤ –¥–ª—è –≤—Ö—ñ–¥–Ω–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.
    - **`TOKEN_LIMIT_OUT`:** –õ—ñ–º—ñ—Ç —Ç–æ–∫–µ–Ω—ñ–≤ –¥–ª—è –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.
    - **–ì–Ω—É—á–∫–µ –û–±—Ä—ñ–∑–∞–Ω–Ω—è:** –ü—Ä–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ñ –ª—ñ–º—ñ—Ç—É —Ç–æ–∫–µ–Ω—ñ–≤, –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –≥–∞—Ä–∞–Ω—Ç—É–≤–∞—Ç–∏, —â–æ Gemini **–∑–∞–≤–µ—Ä—à—É—î —Ä–µ—á–µ–Ω–Ω—è –∞–±–æ –¥—É–º–∫—É** –ø—Ä–∏—Ä–æ–¥–Ω–∏–º —á–∏–Ω–æ–º.

### 2. üõ°Ô∏è –ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å API
- **–¢–∞–π–º–∞—É—Ç–∏ (Timeouts):** –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ç–∞–π–º–∞—É—Ç–∏ –¥–ª—è –≤—Å—ñ—Ö –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö API-–∑–∞–ø–∏—Ç—ñ–≤ (Gemini, –°–µ—Ä–≤—ñ—Å –ó–æ–±—Ä–∞–∂–µ–Ω—å).
- **–ü–æ–≤—Ç–æ—Ä–Ω—ñ –°–ø—Ä–æ–±–∏ (Retry):** –í–ø—Ä–æ–≤–∞–¥–∏—Ç–∏ –º–µ—Ö–∞–Ω—ñ–∑–º **–ø–æ–≤—Ç–æ—Ä–Ω–∏—Ö —Å–ø—Ä–æ–± (Retry)** –∑ –µ–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–π–Ω–æ—é –∑–∞—Ç—Ä–∏–º–∫–æ—é (Exponential Backoff) –¥–ª—è –º–µ—Ä–µ–∂–µ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤.

### 3. ‚è±Ô∏è –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ—Å—Ç—å
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–µ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è (Context/Memory):** –£—Å—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ç–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É, –ø–∞–º'—è—Ç—ñ —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –ø–æ–≤–∏–Ω–Ω—ñ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏—Å—è **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `asyncio.to_thread` –∞–±–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫ –¥–ª—è –ë–î).

---

## üåà –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –ö–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–æ–≥–æ –î–æ—Å–≤—ñ–¥—É (UX)

- **–î–∏–Ω–∞–º—ñ—á–Ω—ñ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è-–°—Ç–∞—Ç—É—Å–∏ (–Ü–º—ñ—Ç–∞—Ü—ñ—è –ü—Ä–æ–≥—Ä–µ—Å—É):** –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ **—Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —î–¥–∏–Ω–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è** –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ, –ø–æ–∫—Ä–æ–∫–æ–≤–æ–≥–æ —Å—Ç–∞—Ç—É—Å—É –æ–±—Ä–æ–±–∫–∏ –∑–∞–ø–∏—Ç—É. **–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É –º–∞—î –±—É—Ç–∏ –¥–≤–æ—Ä—è–¥–∫–æ–≤–∏–º:**
    - **–†—è–¥–æ–∫ 1:** –ó–∞–≤–∂–¥–∏ "**–û—á—ñ–∫—É–π—Ç–µ...**"
    - **–†—è–¥–æ–∫ 2:** –î–∏–Ω–∞–º—ñ—á–Ω–∏–π –æ–ø–∏—Å –ø–æ—Ç–æ—á–Ω–æ–≥–æ –µ—Ç–∞–ø—É, —â–æ **–∑–º—ñ–Ω—é—î—Ç—å—Å—è –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ 3‚Äì4 —Ä–∞–∑–∏**.

| –°—Ü–µ–Ω–∞—Ä—ñ–π / –¢–∏–ø –ó–∞–ø–∏—Ç—É | –ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ –ï—Ç–∞–ø–∏ (–†—è–¥–æ–∫ 2) |
| :--- | :--- |
| **–¢–µ–∫—Å—Ç:** | 1. **–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ.** |
| | 2. **–í—ñ–¥–ø–æ–≤—ñ–¥—å –æ—Ç—Ä–∏–º–∞–Ω–∞. –§–æ—Ä–º—É–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è..** |
| **–í—Ö—ñ–¥–Ω–∏–π –ì–æ–ª–æ—Å:** | 1. –†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è. |
| | 2. –†–æ–∑–ø—ñ–∑–Ω–∞–Ω–æ. –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ. |
| | 3. –í—ñ–¥–ø–æ–≤—ñ–¥—å –æ—Ç—Ä–∏–º–∞–Ω–∞. –§–æ—Ä–º—É–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.|
| **–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ó–æ–±—Ä–∞–∂–µ–Ω—å:** | –©–µ –Ω–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ, –Ω–µ —Ç—Ä–µ–±–∞ –¥–æ–¥–∞–≤–∞—Ç–∏ —Ç—É—Ç –Ω—ñ—á–æ–≥–æ|
| | 4. **–î–∞–Ω—ñ –æ—Ç—Ä–∏–º–∞–Ω–æ.** –ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è. |
| **–í–∏–≤—ñ–¥ –ì–æ–ª–æ—Å–æ–º (TTS):** | 1. –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ. |
| | 2. –í—ñ–¥–ø–æ–≤—ñ–¥—å –æ—Ç—Ä–∏–º–∞–Ω–∞. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≥–æ–ª–æ—Å—É. |
| **–í—Ö—ñ–¥ —ñ –≤–∏—Ö—ñ–¥ –ì–æ–ª–æ—Å:** | 1. –†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è. |
| | 2. –†–æ–∑–ø—ñ–∑–Ω–∞–Ω–æ. –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ. |
| | 3. –í—ñ–¥–ø–æ–≤—ñ–¥—å –æ—Ç—Ä–∏–º–∞–Ω–∞. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≥–æ–ª–æ—Å—É.|

- **–§—ñ–Ω–∞–ª—ñ–∑–∞—Ü—ñ—è:** –ü—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ –∫—ñ–Ω—Ü–µ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ, **–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑—ñ —Å—Ç–∞—Ç—É—Å–æ–º –º–∞—î –±—É—Ç–∏ –≤–∏–¥–∞–ª–µ–Ω–æ**.

---

## üê≥ –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è Docker (–†–æ–±–æ—á–∏–π –ü—Ä–æ—Ü–µ—Å –†–æ–∑—Ä–æ–±–∫–∏)

- **Bind-Mount –¥–ª—è –†–æ–∑—Ä–æ–±–∫–∏:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **bind-mount** –ø—Ä–∏ –∑–∞–ø—É—Å–∫—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è –º–∏—Ç—Ç—î–≤–æ–≥–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–º—ñ–Ω –∫–æ–¥—É –Ω–∞ —Ö–æ—Å—Ç—ñ **–±–µ–∑ –ø–µ—Ä–µ–∑–±–∏—Ä–∞–Ω–Ω—è –æ–±—Ä–∞–∑—É** (`docker build`).
- **Docker Healthcheck:** –î–æ–¥–∞—Ç–∏ –¥–æ `Dockerfile` —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é `HEALTHCHECK` –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –ø—Ä–∞—Ü–µ–∑–¥–∞—Ç–Ω–æ—Å—Ç—ñ –±–æ—Ç–∞.
- **ASR –ú–æ–¥–µ–ª—å:** –†–æ–∑–≥–ª—è–Ω—É—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Docker **Volume** –∞–±–æ –±–∞–≥–∞—Ç–æ—Å—Ç—É–ø–µ–Ω–µ–≤–æ—ó –∑–±—ñ—Ä–∫–∏ –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è –≤–µ–ª–∏–∫–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏ ASR –º–æ–¥–µ–ª—ñ.

---

## üíæ –≤–∏–º–æ–≥–∏ –¥–æ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è 

- **–ö–æ–Ω—Ç–µ–∫—Å—Ç —Ç–∞ –ü–∞–º'—è—Ç—å:** –ó–∞–º—ñ—Å—Ç—å json —Ç—Ä–µ–±–∞ **–ë–∞–∑–∞ –î–∞–Ω–∏—Ö** –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è: –ö–æ–Ω—Ç–µ–∫—Å—Ç—É —á–∞—Ç—É, –¥–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤–æ—ó –ø–∞–º'—è—Ç—ñ, –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, —Å–ø–∏—Å–∫—É –∞–¥–º—ñ–Ω—ñ–≤, —Ç–∞ —ñ–Ω—à–∏—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ñ–≤ —â–æ –º–æ–≥–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ json.
- **RAG:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ë–∞–∑—É –î–∞–Ω–∏—Ö RAG –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∑–∞–≥–∞–ª—å–Ω–∏—Ö –ø—Ä–∞–≤–∏–ª, —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π —Ç–∞ RAG-–¥–∞–Ω–∏—Ö.

---

## –í–∏–º–æ–≥–∏ –¥–æ –ö–æ–¥—É —Ç–∞ –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ (–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è)
- **–ú–æ–¥—É–ª—å–Ω—ñ—Å—Ç—å:** –ö–æ–∂–µ–Ω —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π –±–ª–æ–∫ ‚Äî –≤ –æ–∫—Ä–µ–º–æ–º—É —Ñ–∞–π–ª—ñ.
- **–ß–∏—Å—Ç–æ—Ç–∞ –∫–æ–¥—É:** –ó–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –¥—É–±–ª—é–≤–∞–Ω–Ω—é. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ—Å—Ç—å (`async/await`) —Ç–∞ `asyncio.to_thread` –¥–ª—è –±–ª–æ–∫—É—é—á–∏—Ö I/O –æ–ø–µ—Ä–∞—Ü—ñ–π.
- **–°–µ–∫—Ä–µ—Ç–∏:** –í—Å—ñ —á—É—Ç–ª–∏–≤—ñ –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —É —Ñ–∞–π–ª—ñ **`.env`**.

## –õ–æ–≥—É–≤–∞–Ω–Ω—è
- **–û–±–æ–≤'—è–∑–∫–æ–≤–æ:** –ö–æ–∂–Ω–∞ –¥—ñ—è, –∫–æ–∂–Ω–∞ –ø–æ–º–∏–ª–∫–∞, –∫–æ–∂–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è, –º–∞—î –ª–æ–≥—É–≤–∞—Ç–∏—Å—è.
- **–ö–æ–¥:** –õ–æ–≥—É–≤–∞—Ç–∏ –∫–æ–¥, —è–∫–∏–π **–Ω–∞–¥—Å–∏–ª–∞—î—Ç—å—Å—è** –¥–æ Gemini (—è–∫—â–æ —Ü–µ –∑–∞–ø–∏—Ç –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é –∫–æ–¥—É) —Ç–∞ –∫–æ–¥, —è–∫–∏–π **–ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è** –≤—ñ–¥ Gemini.
- **–ö–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω—ñ—Å—Ç—å:** **–ó–∞–±–æ—Ä–æ–Ω–µ–Ω–æ** –ª–æ–≥—É–≤–∞—Ç–∏ –≤–º—ñ—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —É –∫–æ–Ω—Å–æ–ª—å.
- **–î–æ–∑–≤–æ–ª–µ–Ω–æ:** –õ–æ–≥—É–≤–∞—Ç–∏ –º–µ—Ç–∞–¥–∞–Ω—ñ (ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, —Ç–∏–ø –∑–∞–ø–∏—Ç—É, —É—Å–ø—ñ—Ö/–Ω–µ–≤–¥–∞—á–∞).
- **–ê–¥–º—ñ–Ω-—Ñ—É–Ω–∫—Ü—ñ—è:** **–í—ñ–¥–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª—É –ª–æ–≥—ñ–≤** –±–æ—Ç–∞ (`.log`) –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—É —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É `/admin`.

## –ù–∞–≤—ñ–≥–∞—Ü—ñ—è —Ç–∞ –ö–ª–∞–≤—ñ–∞—Ç—É—Ä–∏ (–í–∞–∂–ª–∏–≤–æ)
- **–û—Å–Ω–æ–≤–Ω–∞ –ù–∞–≤—ñ–≥–∞—Ü—ñ—è:** **Reply-–∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∞** (`ReplyKeyboardMarkup`) –¥–ª—è –≥–æ–ª–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é, –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å —Ç–∞ –∫–æ–º–∞–Ω–¥.
- **–°–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –ú–µ–Ω—é:** **Inline-–∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∞** (`InlineKeyboardMarkup`) –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è **–í–ò–ö–õ–Æ–ß–ù–û** –¥–ª—è:
    1. –°–ø–∏—Å–∫—É —Ç–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è–º–∏ (–≤–∏–¥–∞–ª–µ–Ω–Ω—è, —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è).
    2. **–î–µ—è–∫–∏—Ö —á–∞—Å—Ç–∏–Ω –ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—ñ.**
    3. **–ú–µ–Ω—é –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å TTS/–ì–æ–ª–æ—Å—É.**
    4. **–ú–µ–Ω—é –∫–µ—Ä—É–≤–∞–Ω–Ω—è –ø–∞–º'—è—Ç—Ç—é** —Ç–∞ **–ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è.**

---

## üëë –ê–¥–º—ñ–Ω-–ü–∞–Ω–µ–ª—å (Admin Panel)

–ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å –ø–æ–≤–∏–Ω–Ω–∞ –±—É—Ç–∏ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ –≥—ñ–±—Ä–∏–¥ **Inline —Ç–∞ reply-–∫–ª–∞–≤—ñ–∞—Ç—É—Ä** —Ç–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —á–∞—Å—Ç–∫–æ–≤–æ –ª–∏—à–µ –≤–∏–∑–Ω–∞—á–µ–Ω–∏–º –≤–ª–∞—Å–Ω–∏–∫–æ–º ID –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤ —Ç–∞ –ø–æ–≤–Ω—ñ—Å—Ç—é –≤–ª–∞—Å–Ω–∏–∫—É.

### 1. üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–∞ –ö–≤–æ—Ç–∏
–ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø–µ—Ä–µ–≥–ª—è–¥—É –∑–∞–≥–∞–ª—å–Ω–∏—Ö –º–µ—Ç—Ä–∏–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.
* **–ó–∞–≥–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
    * **–ê–∫—Ç–∏–≤–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ:** –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.
    * **–ù–æ–≤—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ:** –ö—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑–∞ –æ—Å—Ç–∞–Ω–Ω—ñ–π —Ç–∏–∂–¥–µ–Ω—å.
    * **–ó–∞–≥–∞–ª—å–Ω–∏–π –∑–∞–ø–∏—Ç –¥–æ Gemini:** –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤.
    * **–ó–∞–≥–∞–ª—å–Ω–∏–π –∑–∞–ø–∏—Ç –Ω–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è:** –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∑–æ–±—Ä–∞–∂–µ–Ω—å.
* **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ API:**
    * **–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∫–≤–æ—Ç–∏ Gemini:** –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–æ—Ç–æ—á–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –ª—ñ–º—ñ—Ç–∏ —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Gemini API (—è–∫—â–æ API —Ü–µ –¥–æ–∑–≤–æ–ª—è—î).

### 2. üë• –ö–µ—Ä—É–≤–∞–Ω–Ω—è –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏
–°–∏—Å—Ç–µ–º–∞ –ø–æ—à—É–∫—É —Ç–∞ –¥–µ—Ç–∞–ª—å–Ω–æ—ó —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.
* **–°–ø–∏—Å–æ–∫ —Ç–∞ –ü–æ—à—É–∫:**
    * –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å–ø–∏—Å–∫—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑ **–ø–∞–≥—ñ–Ω–∞—Ü—ñ—î—é** (—Å—Ç–æ—Ä—ñ–Ω–∫–∞–º–∏).
    * –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å **–ø–æ—à—É–∫—É** –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ ID –∞–±–æ Username.
* **–î–µ—Ç–∞–ª—å–Ω–∞ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–ü—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ):**
    * ID, Username, –î–∞—Ç–∞ –ø—Ä–∏—î–¥–Ω–∞–Ω–Ω—è.
    * **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:** –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ Gemini, –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å.
    * **–ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è:** –ü–µ—Ä–µ–≥–ª—è–¥ –∞–∫—Ç–∏–≤–Ω–∏—Ö –Ω–∞–≥–∞–¥—É–≤–∞–Ω—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —Ç–∞ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å —ó—Ö –≤–∏–¥–∞–ª–µ–Ω–Ω—è.
* **–î—ñ—ó:**
    * **–ë–∞–Ω/–†–æ–∑–±–∞–Ω** –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–±–ª–æ–∫—É–≤–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É —Ç–∏–º—á–∞—Å–æ–≤–æ–Ω–∞ –≤–∏–∑–Ω–∞—á–µ–Ω–∏–π –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —á–∞—Å, –∞–±–æ –ø–æ—Å—Ç—ñ–π–Ω–æ –¥–æ —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è –∑ –±–æ—Ç–æ–º/–Ω–∞–≥–∞–¥—É–≤–∞–Ω—å/–≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∑–æ–±—Ä–∞–∂–µ–Ω—å/–ø–æ–≤–Ω–∏–π –±–∞–Ω).
    * **–°–∫–∏–¥–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É —Ç–∞ –∞–±–æ –ø–∞–º º—è—Ç—ñ** (–æ—á–∏—â–µ–Ω–Ω—è –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ—ó —ñ—Å—Ç–æ—Ä—ñ—ó —á–∞—Ç—É).

### 3. üì¢ –†–æ–∑—Å–∏–ª–∫–∞ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (Broadcast)

* **–§—É–Ω–∫—Ü—ñ—è Broadcast:** –ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, –æ—Ç—Ä–∏–º–∞–Ω–æ–≥–æ –≤—ñ–¥ **–≤–ª–∞—Å–Ω–∏–∫–∞** (–∑–≤–∏—á–∞–π–Ω–∏–º –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ), **–≤—Å—ñ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º** –±–æ—Ç–∞.

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–æ—î–∫—Ç—É
- **`main.py`**: –ì–æ–ª–æ–≤–Ω–∞ —Ç–æ—á–∫–∞ –≤—Ö–æ–¥—É.
- **`config/settings.py`**: –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è `.env` —Ç–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è.
- **`config/runtime_config.py`**: –ù–æ–≤–∏–π —Ñ–∞–π–ª –¥–ª—è –Ω–µ—á—É—Ç–ª–∏–≤–∏—Ö, —á–∞—Å—Ç–æ —Ä–µ–¥–∞–≥–æ–≤–∞–Ω–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤.
- **`data/encrypted_store.py`**: –®–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è/–¥–µ—à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å/–∫–æ–Ω—Ç–µ–∫—Å—Ç—É.
- **`handlers/...`**: –û–±—Ä–æ–±–Ω–∏–∫–∏ –∫–æ–º–∞–Ω–¥ (start, text, voice, image_generation, settings, reminders, **admin**).
- **`services/gemini_service.py`**: –ö–ª–∞—Å –¥–ª—è Gemini API.
- **`services/genimage_service.py`**: –ö–ª–∞—Å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∑–æ–±—Ä–∞–∂–µ–Ω—å.
- **`services/audio_converter.py`**: –ö–ª–∞—Å FFmpeg.
- **`services/vosk_tts_engine.py`**: –ö–ª–∞—Å-–æ–±–æ–ª–æ–Ω–∫–∞ –¥–ª—è Vosk —Ç–∞ EdgeTTS.
- **`keyboards/reply_kb.py`**: –í—Å—ñ **Reply-–∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏**.
- **`keyboards/inline_kb.py`**: –í—Å—ñ **Inline-–∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏** (–Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è, –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å).
- **`utils/reminders.py`**: –õ–æ–≥—ñ–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏ –Ω–∞–≥–∞–¥—É–≤–∞–Ω—å.
- **`utils/logging_setup.py`**: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ª–æ–≥—É–≤–∞–Ω–Ω—è.

## –ö–ª–∞–≤—ñ–∞—Ç—É—Ä–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å
- **–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ì–æ–ª–æ—Å—É (TTS/ASR) –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:**
    - –ö–Ω–æ–ø–∫–∞ **"–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –≥–æ–ª–æ—Å—É"** –≤—ñ–¥–∫—Ä–∏–≤–∞—î Inline-–∫–ª–∞–≤—ñ–∞—Ç—É—Ä—É –∑ –æ–ø—Ü—ñ—è–º–∏: **–£–≤—ñ–º–∫–Ω—É—Ç–∏/–í–∏–º–∫–Ω—É—Ç–∏ TTS** —Ç–∞ **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤–∏–±–æ—Ä—É –≥–æ–ª–æ—Å—É** (–ñ—ñ–Ω–æ—á–∏–π/–ß–æ–ª–æ–≤—ñ—á–∏–π).
- **–ö–µ—Ä—É–≤–∞–Ω–Ω—è –ü–∞–º'—è—Ç—Ç—é:**
    - –ö–Ω–æ–ø–∫–∞ **"–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–∞–º º—è—Ç—Ç—é"** –≤—ñ–¥–∫—Ä–∏–≤–∞—î –º–µ–Ω—é –∑ –æ–ø—Ü—ñ—è–º–∏: **"–î–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤–∞ –ø–∞–º º—è—Ç—å"**, **"–ö–æ–Ω—Ç–µ–∫—Å—Ç"**, **"–í–∏–¥–∞–ª–∏—Ç–∏ –≤—Å–µ"**.
    - **–ï–∫—Å–ø–æ—Ä—Ç:** –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å **"–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤ JSON"** –ø–∞–º'—è—Ç—å/–∫–æ–Ω—Ç–µ–∫—Å—Ç.
    - **–í–∏–¥–∞–ª–µ–Ω–Ω—è:** –í–∏–≤–µ–¥–µ–Ω–Ω—è **Inline-–∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏ –∑ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è–º** –ø–µ—Ä–µ–¥ –≤–∏–¥–∞–ª–µ–Ω–Ω—è–º (–¥–ª—è –≤—Å—ñ—Ö —Ç—Ä—å–æ—Ö –æ–ø—Ü—ñ–π).